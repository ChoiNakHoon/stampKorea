{% extends "base.html" %}
{% load static %}
{% block page_title %} Search {% endblock %}

{% block content %}
<script>
    var locations = [];
</script>
<div class="container flex mx-auto">
    <div class="h-75vh w-100vh max-w-3xl mx-2 pr-10 overflow-y-scroll" id="contents">
    <h3 class="text-black text-3xl font-semibold">{{word}}</h3>
    {% for place in places %}
        {% include 'mixins/place_card_col.html' with place=place %}
    {% endfor %}
        <div class="flex justify-center text-gray-700">

            {% if places.has_previous %}
            <a href="?search={{word}}&page=1">
                <div class="h-12 w-12 mr-1 flex justify-center items-center rounded-full bg-gray-200 cursor-pointer">
                    <i class="fas fa-fast-backward"></i>
                </div>
            </a>
            <a href="?search={{word}}&page={{places.previous_page_number}}">
                <div class="h-12 w-12 mr-1 flex justify-center items-center rounded-full bg-gray-200 cursor-pointer">
                    <i class="fas fa-angle-left"></i>
                </div>
            </a>
            {% endif %}

            <div class="flex h-12 font-medium rounded-full bg-gray-200">

                <!-- 페이지의 갯수 만큼 Loop -->
                {% for index in page_range %}
                <!-- current page -->
                {% if places.number == index %}
                        <span class="w-12 md:flex justify-center items-center hidden cursor-pointer leading-5 transition duration-150 ease-in rounded-full bg-teal-600 text-white">{{index}}</span>
                    {% else %}
                    <!-- current page가 아니라면 -->
                        <a href="?search={{word}}&page={{index}}" class="w-12 md:flex justify-center items-center hidden cursor-pointer leading-5 transition duration-150 ease-in rounded-full">{{index}}
                        </a>
                    {% endif %}

                {% endfor %}
            </div>
            {% if places.has_next %}
            <a href="?search={{word}}&page={{places.next_page_number}}">
                <div class="h-12 w-12 mr-1 flex justify-center items-center rounded-full bg-gray-200 cursor-pointer">
                   <i class="fas fa-angle-right"></i>
                </div>
            </a>
            <a href="?search={{word}}&page={{places.paginator.num_pages}}">
                <div class="h-12 w-12 mr-1 flex justify-center items-center rounded-full bg-gray-200 cursor-pointer">
                    <i class="fas fa-fast-forward"></i>
                </div>
            </a>
            {% endif %}
        </div>
    </div>
    <nav class="max-w-3xl w-100vh h-75vh inset-0 flex float-right max-h-full sticky top-0 right-0" id="map-js" onload="init()">
    </nav>
    <script>
        var locations = {{ locations | safe}};
    </script>
    <script src="{% static 'js/maps.js'%}"></script>
</div>

{% endblock content %}